Version 4
SHEET 1 3832 748
WIRE -96 -1024 -128 -1024
WIRE 112 -1024 80 -1024
WIRE 368 -1024 336 -1024
WIRE -128 -1008 -128 -1024
WIRE 80 -1008 80 -1024
WIRE 336 -1008 336 -1024
WIRE 736 -960 592 -960
WIRE 928 -960 800 -960
WIRE -128 -912 -128 -928
WIRE 80 -912 80 -928
WIRE 336 -912 336 -928
WIRE -112 -784 -224 -784
WIRE -16 -784 -112 -784
WIRE 144 -784 64 -784
WIRE 256 -784 144 -784
WIRE 336 -784 256 -784
WIRE 416 -784 336 -784
WIRE 512 -784 416 -784
WIRE 592 -784 592 -960
WIRE 592 -784 512 -784
WIRE 640 -784 592 -784
WIRE 928 -784 928 -960
WIRE 928 -784 896 -784
WIRE 1024 -784 928 -784
WIRE 1104 -784 1024 -784
WIRE 1184 -784 1104 -784
WIRE 1264 -784 1184 -784
WIRE 1504 -784 1264 -784
WIRE 1664 -784 1584 -784
WIRE 256 -768 256 -784
WIRE 336 -768 336 -784
WIRE 416 -768 416 -784
WIRE 512 -768 512 -784
WIRE 592 -768 592 -784
WIRE 928 -768 928 -784
WIRE 1024 -768 1024 -784
WIRE 1104 -768 1104 -784
WIRE 1184 -768 1184 -784
WIRE 1264 -768 1264 -784
WIRE -112 -752 -112 -784
WIRE 1664 -752 1664 -784
WIRE 256 -688 256 -704
WIRE 336 -688 336 -704
WIRE 336 -688 256 -688
WIRE 416 -688 416 -704
WIRE 416 -688 336 -688
WIRE 512 -688 512 -704
WIRE 512 -688 416 -688
WIRE 592 -688 592 -704
WIRE 592 -688 512 -688
WIRE 928 -688 928 -704
WIRE 1024 -688 1024 -704
WIRE 1024 -688 928 -688
WIRE 1104 -688 1104 -704
WIRE 1104 -688 1024 -688
WIRE 1184 -688 1184 -704
WIRE 1184 -688 1104 -688
WIRE 1264 -688 1264 -704
WIRE 1264 -688 1184 -688
WIRE 416 -672 416 -688
WIRE 1104 -672 1104 -688
WIRE -112 -640 -112 -672
WIRE -80 -640 -112 -640
WIRE 144 -640 144 -784
WIRE 144 -640 112 -640
WIRE 144 -592 112 -592
WIRE 144 -576 144 -592
WIRE 1872 -576 1696 -576
WIRE 1808 -528 1792 -528
WIRE 1808 -512 1808 -528
WIRE 1872 -496 1872 -576
WIRE 1872 -496 1840 -496
WIRE 1568 -480 1440 -480
WIRE 1696 -480 1696 -576
WIRE 1696 -480 1568 -480
WIRE 1776 -480 1696 -480
WIRE -80 -464 -112 -464
WIRE 768 -464 768 -688
WIRE 864 -464 768 -464
WIRE 960 -464 864 -464
WIRE 1040 -464 960 -464
WIRE 1232 -464 1120 -464
WIRE 1280 -464 1232 -464
WIRE 1376 -464 1280 -464
WIRE 1872 -464 1840 -464
WIRE 960 -448 960 -464
WIRE 1504 -448 1440 -448
WIRE 1872 -448 1872 -464
WIRE 1280 -432 1280 -464
WIRE 1808 -416 1808 -448
WIRE 1408 -400 1408 -432
WIRE 1408 -400 1392 -400
WIRE -112 -368 -112 -464
WIRE 48 -368 -112 -368
WIRE 960 -368 960 -384
WIRE -112 -352 -112 -368
WIRE 160 -352 112 -352
WIRE 272 -352 160 -352
WIRE 1872 -352 1872 -368
WIRE 48 -336 0 -336
WIRE 768 -320 768 -464
WIRE 1280 -320 1280 -352
WIRE 1392 -320 1280 -320
WIRE 1504 -320 1504 -448
WIRE 1504 -320 1392 -320
WIRE 80 -304 80 -320
WIRE 96 -304 80 -304
WIRE 1280 -288 1280 -320
WIRE -112 -256 -112 -272
WIRE 0 -256 0 -336
WIRE 160 -256 160 -352
WIRE 160 -256 0 -256
WIRE 272 -256 272 -352
WIRE 320 -256 272 -256
WIRE 464 -240 384 -240
WIRE 640 -240 544 -240
WIRE 720 -240 640 -240
WIRE 160 -224 0 -224
WIRE 320 -224 272 -224
WIRE 768 -208 768 -224
WIRE 352 -192 352 -208
WIRE 368 -192 352 -192
WIRE 1280 -192 1280 -208
WIRE 96 -160 80 -160
WIRE 80 -144 80 -160
WIRE 976 -144 960 -144
WIRE 0 -128 0 -224
WIRE 48 -128 0 -128
WIRE 160 -112 160 -224
WIRE 160 -112 112 -112
WIRE 272 -112 272 -224
WIRE 272 -112 160 -112
WIRE 960 -112 960 -144
WIRE 48 -96 0 -96
WIRE 0 -80 0 -96
WIRE 960 0 960 -32
WIRE 0 16 0 0
WIRE 32 16 0 16
WIRE 80 16 80 -80
WIRE 80 16 32 16
WIRE 32 32 32 16
WIRE 640 48 640 -240
WIRE 896 48 640 48
WIRE 960 128 960 96
WIRE 992 128 960 128
FLAG 1664 -752 0
FLAG 416 -672 0
FLAG 336 -912 0
FLAG 368 -1024 V_SUPPLY
FLAG -224 -784 V_SUPPLY
FLAG 1104 -672 0
FLAG 1264 -784 V_OUT
FLAG 864 -464 V_ADJUST
FLAG 1872 -352 0
FLAG 1280 -192 0
FLAG 1408 -400 V_SUPPLY
FLAG 1408 -496 0
FLAG 1392 -320 V_GAIN_REF
FLAG 1568 -480 V_CTRL_BUFFERED
FLAG 1808 -416 0
FLAG 144 -784 V_SENSE-
FLAG 272 -352 I_SENSE
FLAG 352 -272 0
FLAG 32 32 0
FLAG 640 -240 I_ADJUST
FLAG 992 128 CURRENT_LIMIT_MCU_IRQ
FLAG 80 -912 0
FLAG 112 -1024 V_MCU
FLAG 960 -144 V_MCU
FLAG 960 -368 0
FLAG -128 -912 0
FLAG -96 -1024 V_5.0
FLAG 1808 -528 V_5.0
FLAG 144 -576 0
FLAG -112 -256 0
FLAG -80 -592 V_SUPPLY
FLAG 80 -384 0
FLAG 1232 -464 V_CTRL_AMP
FLAG 768 -208 0
FLAG 80 -304 V_5.0
FLAG 80 -160 V_5.0
FLAG 272 -112 I_CTRL
FLAG 352 -192 V_SUPPLY
SYMBOL PowerProducts\\LT1083 768 -784 R0
WINDOW 0 110 -67 Bottom 2
WINDOW 3 44 110 Left 2
SYMATTR InstName U1
SYMBOL res 1600 -800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 8
SYMBOL cap 608 -768 M0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL cap 528 -768 M0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL cap 432 -768 M0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL cap 352 -768 M0
SYMATTR InstName C4
SYMATTR Value 4.7µ
SYMBOL cap 272 -768 M0
SYMATTR InstName C5
SYMATTR Value 10µ
SYMBOL voltage 336 -1024 M0
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL cap 912 -768 R0
SYMATTR InstName C6
SYMATTR Value 100n
SYMBOL cap 1008 -768 R0
SYMATTR InstName C7
SYMATTR Value 1µ
SYMBOL cap 1088 -768 R0
SYMATTR InstName C8
SYMATTR Value 4.7µ
SYMBOL cap 1168 -768 R0
SYMATTR InstName C9
SYMATTR Value 10µ
SYMBOL cap 1248 -768 R0
SYMATTR InstName C10
SYMATTR Value 22µ
SYMBOL diode 800 -976 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 944 -448 R0
SYMATTR InstName C11
SYMATTR Value 10µ
SYMBOL voltage 1872 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_CTRL1
SYMATTR Value 2.048
SYMBOL OpAmps\\OP07 1408 -400 R180
SYMATTR InstName U2
SYMBOL res 1296 -448 M0
SYMATTR InstName R2
SYMATTR Value 130k
SYMBOL res 1296 -304 M0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL OpAmps\\LT6003 1808 -480 M0
SYMATTR InstName U3
SYMBOL res 80 -800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 0.01
SYMBOL voltage 0 -96 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I_CTRL
SYMATTR Value 0.256
SYMBOL OpAmps\\OP07 352 -176 M180
SYMATTR InstName U6
SYMBOL res 1136 -480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 944 -128 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL voltage 80 -1024 M0
SYMATTR InstName V4
SYMATTR Value 3.3
SYMBOL voltage -128 -1024 M0
SYMATTR InstName V5
SYMATTR Value 5
SYMBOL OpAmps\\LT6107 16 -576 M0
SYMATTR InstName U4
SYMBOL res -96 -768 M0
SYMATTR InstName R5
SYMATTR Value 499
SYMBOL res -96 -368 M0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL npn 896 0 R0
SYMATTR InstName Q1
SYMBOL OpAmps\\LT6003 80 -352 M180
SYMATTR InstName U7
SYMBOL OpAmps\\LT6003 80 -112 R0
SYMATTR InstName U5
SYMBOL nmos 720 -320 R0
SYMATTR InstName M1
SYMBOL res 560 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
TEXT 1408 -1040 Left 2 !.tran 0 5 0 0.01
TEXT 1456 -192 Left 2 ;V_REG_OUT = (OP_GAIN(V_CTRL) + VREG_REF)\nV_REG_OUT = (14(V_CTRL)+1.24)
